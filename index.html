<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion des établissements scolaires</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container mt-4">
        <div class="p-3 d-flex justify-content-between align-items-center rounded-top shadow-sm header-section">
            <h1 class="text-white m-0">Liste <span class="text-light">Etablissements</span></h1>
            <button id="addEstablishmentBtn" class="btn btn-success"> + Ajouter un établissement</button>
        </div>
    
        <div class="bg-white p-3 shadow rounded-bottom">
            <div class="table-responsive">
                <table id="establishmentsTable" class="table table-striped table-hover mb-0">
                    <thead class="table-light">
                        <tr>
                            <th>Nom</th>
                            <th>Quartier</th>
                            <th>Date de création</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr id="noEstablishmentsRow">
                            <td colspan="4" class="text-center">Liste vide</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Modal 1: Établissement -->
    <div class="modal fade" id="establishmentModal" tabindex="-1" aria-labelledby="establishmentModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="establishmentModalLabel">Ajouter un établissement</h5>
                </div>
                <div class="modal-body">
                    <form id="establishmentForm">
                        <input type="hidden" id="establishmentId">
                        <div class="mb-3">
                            <label for="establishmentName" class="form-label">Nom</label>
                            <input type="text" class="form-control" id="establishmentName" required>
                            <div class="invalid-feedback">Veuillez entrer le nom de l'établissement.</div>
                        </div>
                        <div class="mb-3">
                            <label for="establishmentDistrict" class="form-label">Quartier</label>
                            <input type="text" class="form-control" id="establishmentDistrict" required>
                            <div class="invalid-feedback">Veuillez entrer le quartier.</div>
                        </div>
                        <div class="mb-3">
                            <label for="establishmentDate" class="form-label">Date de création</label>
                            <input type="date" class="form-control" id="establishmentDate" required>
                            <div class="invalid-feedback">Veuillez entrer la date de création.</div>
                        </div>
                    </form>
                    
                    <div class="mt-4">
                        <h5>Liste des classes</h5>
                        <button id="addClassBtn" class="btn btn-success mb-3">+ Ajouter une classe</button>
                        <div class="table-responsive">
                            <table id="classesTable" class="table table-striped table-hover">
                                <thead>
                                    <tr>
                                        <th>Nom classe</th>
                                        <th>Filière</th>
                                        <th>Professeur titulaire</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr id="noClassesRow">
                                        <td colspan="4" class="text-center">Liste vide</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <button type="button" id="saveEstablishmentBtn" class="btn btn-success">Enregistrer</button>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Fermer</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal 2: Classe -->
    <div class="modal fade" id="classModal" tabindex="-1" aria-labelledby="classModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="classModalLabel">Ajouter une classe</h5>
                </div>
                <div class="modal-body">
                    <form id="classForm">
                        <input type="hidden" id="classId">
                        <input type="hidden" id="classEstablishmentId">
                        <div class="mb-3">
                            <label for="className" class="form-label">Nom classe</label>
                            <input type="text" class="form-control" id="className" required>
                            <div class="invalid-feedback">Veuillez entrer le nom de la classe.</div>
                        </div>
                        <div class="mb-3">
                            <label for="classField" class="form-label">Filière</label>
                            <input type="text" class="form-control" id="classField" required>
                            <div class="invalid-feedback">Veuillez entrer la filière.</div>
                        </div>
                        <div class="mb-3">
                            <label for="classTeacher" class="form-label">Professeur titulaire</label>
                            <input type="text" class="form-control" id="classTeacher" required>
                            <div class="invalid-feedback">Veuillez entrer le nom du professeur titulaire.</div>
                        </div>
                    </form>
                    
                    <div class="mt-4">
                        <h5>Liste des élèves</h5>
                        <button id="addStudentBtn" class="btn btn-success mb-3"> + Ajouter un élève</button>
                        <div class="table-responsive">
                            <table id="studentsTable" class="table table-striped table-hover">
                                <thead>
                                    <tr>
                                        <th>Nom</th>
                                        <th>Prénom</th>
                                        <th>Date de naissance</th>
                                        <th>Sexe</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr id="noStudentsRow">
                                        <td colspan="5" class="text-center">Liste vide</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <button type="button" id="saveClassBtn" class="btn btn-success">Enregistrer</button>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Fermer</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal 3: Élève -->
    <div class="modal fade" id="studentModal" tabindex="-1" aria-labelledby="studentModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="studentModalLabel">Ajouter un élève</h5>
                </div>
                <div class="modal-body">
                    <form id="studentForm">
                        <input type="hidden" id="studentId">
                        <input type="hidden" id="studentClassId">
                        <div class="mb-3">
                            <label for="studentLastName" class="form-label">Nom</label>
                            <input type="text" class="form-control" id="studentLastName" required>
                            <div class="invalid-feedback">Veuillez entrer le nom de l'élève.</div>
                        </div>
                        <div class="mb-3">
                            <label for="studentFirstName" class="form-label">Prénom</label>
                            <input type="text" class="form-control" id="studentFirstName" required>
                            <div class="invalid-feedback">Veuillez entrer le prénom de l'élève.</div>
                        </div>
                        <div class="mb-3">
                            <label for="studentBirthDate" class="form-label">Date de naissance</label>
                            <input type="date" class="form-control" id="studentBirthDate" required>
                            <div class="invalid-feedback">Veuillez entrer la date de naissance.</div>
                        </div>
                        <div class="mb-3">
                            <label for="studentGender" class="form-label">Sexe</label>
                            <select class="form-select" id="studentGender" required>
                                <option value="" selected disabled>Sélectionnez</option>
                                <option value="Masculin">Masculin</option>
                                <option value="Féminin">Féminin</option>
                                <option value="Autre">Autre</option>
                            </select>
                            <div class="invalid-feedback">Veuillez sélectionner le sexe.</div>
                        </div>
                    </form>
                    <button type="button" id="saveStudentBtn" class="btn btn-success">Enregistrer</button>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Fermer</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div class="modal fade" id="confirmationModal" tabindex="-1" aria-labelledby="confirmationModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirmationModalLabel">Supprimer</h5>
                </div>
                <div class="modal-body" id="confirmationMessage">
                    Êtes-vous sûr de vouloir supprimer cet élément ?
                </div>
                <div class="modal-footer2">
                    <button type="button" id="confirmDeleteBtn" class="btn btn-danger">Supprimer</button>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Annuler</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/data.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/establishments.js"></script>
    <script src="js/classes.js"></script>
    <script src="js/students.js"></script>
    <script src="js/app.js"></script>
</body>
</html>